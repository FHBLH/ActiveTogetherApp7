<h2>Angebotene Kurse</h2>

<div class="select-container">
  <mat-form-field>
    <mat-label>Filter</mat-label>
    <input matInput type="input" [(ngModel)]="filter">
  </mat-form-field>
</div>

<div class="container-fluid">
  <div class="row row-lg-min-height justify-content-center">
    <div class="d-flex align-items-lg-center col-1 col-lg-1 overflow-hidden grid-border grid-header">Kurs</div>
    <div class="d-flex align-items-lg-center col-2 col-lg-1 overflow-hidden grid-border grid-header">Veranstaltungsort
    </div>
    <div class="d-flex align-items-lg-center col-2 col-lg-2 overflow-hidden grid-border grid-header">Adresse des
      Veranstaltungsortes
    </div>
    <div class="d-flex align-items-lg-center col-2 col-lg-2 overflow-hidden grid-border grid-header">Ã–ffentlich
      erreichbar?
    </div>
    <div class="d-flex align-items-lg-center col-1 col-lg-1 overflow-hidden grid-border grid-header">Kursleiter</div>
    <div class="d-flex align-items-lg-center col-4 col-lg-3 overflow-hidden grid-border grid-header">Alle Termine</div>
  </div>
  <div class="row row-lg-min-height justify-content-center" *ngFor="let course of filteredCourses()">
    <div class="d-flex align-items-lg-center col-1 col-lg-1 overflow-hidden grid-border">{{ course.name }}</div>
    <div
      class="d-flex align-items-lg-center col-2 col-lg-1 overflow-hidden grid-border">{{ course.eventLocation.name }}
    </div>
    <div
      class="d-flex align-items-lg-center col-2 col-lg-2 overflow-hidden grid-border">{{ course.eventLocation.address }}
    </div>
    <div
      class="d-flex align-items-lg-center col-2 col-lg-2 overflow-hidden grid-border">{{ course.eventLocation.venueByPublicTansport ? "Ja" : "Nein" }}
    </div>
    <div class="d-flex align-items-lg-center col-1 col-lg-1 overflow-hidden grid-border">{{ course.instructor }}</div>
    <div class="d-flex align-items-lg-center col-4 col-lg-3 overflow-hidden grid-border">
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>{{ course.dates.length }} Termin(e)</mat-panel-title>
        </mat-expansion-panel-header>
        <ul>
          <li *ngFor="let date of course.dates">
            <span>{{ date.begin | date:"MMM dd, yyyy 'um' hh:mm a" }}</span> -
            <span>{{ date.end | date:"MMM dd, yyyy 'um' hh:mm a" }}</span>
          </li>
        </ul>
      </mat-expansion-panel>
    </div>
  </div>
</div>

<h2>Anmeldungen</h2>
<div class="container-fluid">
  <div class="row row-lg-min-height justify-content-center">
    <div class="d-flex align-items-lg-center col-3 col-lg-2 overflow-hidden grid-border grid-header">
      <span class="clickable" (click)="changeOrder()">
          Anmeldedatum {{ storeService.currentOrder === 'asc' ? '(aufsteigend)' : storeService.currentOrder === 'desc' ? '(absteigend)' : '' }}
      </span>
    </div>
    <div class="d-flex align-items-lg-center col-2 col-lg-2 overflow-hidden grid-border grid-header">Name</div>
    <div class="d-flex align-items-lg-center col-2 col-lg-2 overflow-hidden grid-border grid-header">E-Mail</div>
    <div class="d-flex align-items-lg-center col-2 col-lg-1 overflow-hidden grid-border grid-header">Geburtsdatum</div>
    <div class="d-flex align-items-lg-center col-2 col-lg-2 overflow-hidden grid-border grid-header">Kurs</div>
    <div class="d-flex align-items-lg-center col-1 col-lg-1 overflow-hidden grid-border grid-header"></div>
  </div>
  <div class="row position-relative row-lg-min-height justify-content-center"
       *ngFor="let registration of storeService.registrations">
    <div [hidden]="registration.isVisible === undefined" class="deletion-overlay">
      <mat-spinner color="primary" style="height: 80%"></mat-spinner>
    </div>

    <div
      class="d-flex align-items-lg-center col-3 col-lg-2 overflow-hidden grid-border">{{ registration.registrationDate | date:'dd.MM.yyyy HH:mm:ss' }}
    </div>
    <div class="d-flex align-items-lg-center col-2 col-lg-2 overflow-hidden grid-border">{{ registration.name }}</div>
    <div class="d-flex align-items-lg-center col-2 col-lg-2 overflow-hidden grid-border">{{ registration.email }}</div>
    <div class="d-flex align-items-lg-center col-2 col-lg-1 overflow-hidden grid-border">{{ registration.birthdate }}
    </div>
    <div
      class="d-flex align-items-lg-center col-2 col-lg-2 overflow-hidden grid-border">{{ registration.course.name }}
    </div>
    <div class="d-flex align-items-lg-center col-1 col-lg-1 overflow-hidden grid-border">
      <button mat-stroked-button (click)="deleteRegistration(registration)">Abmelden</button>
    </div>
  </div>
</div>

<div class="pagination">
  <mat-paginator
    (page)="handlePageEvent($event)"
    [length]="storeService.registrationTotalCount"
    [pageSize]="storeService.currentPageSize"
    showFirstLastButtons="true"
    [pageSizeOptions]="[5, 10, 25]"
    [pageIndex]="storeService.currentPage"
    aria-label="Select page">
  </mat-paginator>
</div>
